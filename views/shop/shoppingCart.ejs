<!DOCTYPE html>
<html>

<head>
  <% include ../partials/header.ejs %>

</head>

<body>
  <% include ../partials/scripts.ejs %>
    <% include ../partials/menu.ejs %>


      <div class="d-flex container-fluid navbarAllowance justify-content-center">
        <div class="col-md-11 panelView">


        <h1 > <%= title %></h1>
        <div class="row">
          <div class="alert alert-danger " <% if(noError) {%> hidden
            <%} %> >
              <%= errorMessage %>
          </div>
        </div>

        <div class="container-fluid">
          <% if(products && products.length !== 0) {%>
            <div class="row d-flex justify-content-center">
              <div class="col-10 p-0">
                <br>
                <ul class="list-group">

                  <% products.forEach( function(product){ %>
                    <li class="list-group-item list-group-flush ">

                      <div class="row d-flex align-items-center ">
                        <div class="col text-center">
                          <strong> <%= product.item.title %> </strong>
                        </div>

                        <div class="col">
                          <div class="text-center">
                            <a class="px-2" href="/shop/reduceItemQty/<%=product.item._id %>"><i class="far fa-minus-square"></i></a>
                            <label class="m-0"><%= product.qty %></label>
                            <a class="px-2" href="/shop/increaseItemByOne/<%=product.item._id%>"><i class="far fa-plus-square"></i></a>
                          </div>
                        </div>

                      <div class="col text-center">

                          <span class="label label-success">$<%= ( product.item.price * product.qty)%></span>
                      </div>
                      <div class="col text-center">
                        <a  class="btn btn-danger"href="/shop/removeItem/<%=product.item._id %>"><i class="fas fa-times-circle"></i></a>
                        <!-- <button class="btn btn-danger"> <i class="fas fa-times-circle"></i> </button> -->
                      </div>
                      </div>

                      <!-- <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Dropdown link <span class="caret"></span>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                          <a class="dropdown-item" href="/shop/reduceItemQty/<%=product.item._id %>" >Reduce By 1</a>
                          <a class="dropdown-item" href="/shop/increaseItemByOne/<%=product.item._id%>">Add 1</a>
                          <a class="dropdown-item" href="/shop/removeItem/<%=product.item._id %>">Delete</a>
                        </div>
                      </div> -->

                    </li>

                    <%})%>



                </ul>
              </div>
            </div>
            <br>

            <!-- <div class="row">
              <div class="col-3 offset-3 text-center">
                <strong class="px-2">Total:</strong>
              </div>
              <div class="col-3 text-center">
                <strong class="px-2">  Â£<%= totalPrice %></strong>
              </div>

            </div> -->
            <div class="row d-flex justify-content-center">

              <div class="col-3 text-center">
                <h2 class="px-2"> Order total: $<%= totalPrice %></h2>
              </div>

            </div>

            <hr>
            <div class="row">
              <div class="col-4 offset-4">
                <!-- <button type="button" class="btn btn-success">Checkout</button> -->
                <a href="/shop/checkout" class="btn btn-primary btn-block">Checkout</a>

              </div>
            </div>

            <%} else { %>

              <div class="row">
                <div class="col">
                  <br>
                  <h2 class="text-center">No Items in cart</h2>
                </div>
              </div>
              <% }%>
        </div>
        </div>
      </div>

</body>

</html>
